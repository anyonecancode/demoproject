{% extends "base.html" %}

{% block content %}
<header>
  <h1>Explore beers</h1>
</header>

<form id="searchform" action="/search" method="post">
  <h2>Showing results for {{ searchterm if searchterm else 'All Records' }} ({{pagecontrols.resultscount}} records)</h2>
  <div class="searchinfo">
    <p>Page {{pagecontrols.page}} of {{pagecontrols.pages}} </p>
    <p>
      {% if pagecontrols.prev %}
      <a href="{{pagecontrols.prev}}">« Previous</a>
      {% endif %}
      {% if pagecontrols.next %}
      <a href="{{pagecontrols.next}}">Next »</a>
      {% endif %}
    </p>
  </div>
</form>

<table id="resultstable">
  <thead>
    <tr>
      <th colspan="3" class="tbl_header_border tbl_header_left">Beer</th>
      <th colspan="3" class="tbl_header_right">Brewery</th>
    </tr>
    <tr class="subhead">
      <th>Name</th>
      <th>Category and Style</th>
      <th class="tbl_header_border">ABV</th>
      <th>Name</th>
      <th>State or Region</th>
      <th>Country</th>
    </tr>
  </thead>
  <tbody>
    {% for r in results %}
    <tr>
      <td class="beername"><a href="#">{{ r.beer }}</a></td>
      <td>{% if r.category %}<a href="#">{{r.category.name}}</a>, <a href="#">{{r.style.name}}</a>{% endif %}</td>
      <td>4.5</td>
      <td>{% if r.brewery.name %}<a href="#">{{ r.brewery.name }}</a>{% endif %}</td>
      <td>{% if r.brewery.state %}<a href="#">{{ r.brewery.state }}</a>{% endif %}</td>
      <td>{% if r.brewery.country %}<a href="#">{{ r.brewery.country }}</a>{% endif %}</td>
    </tr>
    {% endfor %}
  </tbody>
  <tfoot id="tfoot">
    <tr>
      <td colspan="6">
        Page {{pagecontrols.page}} of {{pagecontrols.pages}}
      </td>
    </tr>
    <tr>
      <td colspan="6">
        {% if pagecontrols.prev %}
        <a href="{{pagecontrols.prev}}#tfoot">« Previous</a>
        {% endif %}
        {% if pagecontrols.next %}
        <a href="{{pagecontrols.next}}#tfoot">Next »</a>
        {% endif %}
      </td>
    </tr>
  </tfoot>
</table>
{% endblock %}
